(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+Ht4":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return u})),a.d(t,"renderToDom",(function(){return p}));var n=a("JX7q"),r=a("dI71"),l=a("q1tI"),o=a("i8i4"),i=a("+qjn"),s=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.startTime,a=e.endTime,n=e.onChangeDay,r=e.allDay,o=e.onChangeAllDay,i=e.selectedTime,s=Math.round((a-t)/864e5),c=function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()};return l.createElement("div",{className:"control-panel"},l.createElement("h3",null,"Heatmap"),l.createElement("p",null,"Map showing earthquakes",l.createElement("br",null),"from ",l.createElement("b",null,c(t))," to ",l.createElement("b",null,c(a)),"."),l.createElement("hr",null),l.createElement("div",{className:"input"},l.createElement("label",null,"All Days"),l.createElement("input",{type:"checkbox",name:"allday",checked:r,onChange:function(e){return o(e.target.checked)}})),l.createElement("div",{className:"input "+(r?"disabled":"")},l.createElement("label",null,"Each Day: ",c(i)),l.createElement("input",{type:"range",disabled:r,min:1,max:s,step:1,onChange:function(e){var a=e.target.value;n(t+864e5*a)}})),l.createElement("hr",null),l.createElement("p",null,"Data source:"," ",l.createElement("a",{href:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson"},"earthquakes.geojson")),l.createElement("div",{className:"source-link"},l.createElement("a",{href:"https://github.com/visgl/react-map-gl/tree/6.0-release/examples/heatmap",target:"_new"},"View Code â†—")))},t}(l.PureComponent),c=a("DRYM"),m={maxzoom:9,type:"heatmap",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",.9,"rgb(255,201,101)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}};function h(e,t){var a=new Date(t),n=a.getFullYear(),r=a.getMonth(),l=a.getDate();return{type:"FeatureCollection",features:e.features.filter((function(e){var t=new Date(e.properties.time);return t.getFullYear()===n&&t.getMonth()===r&&t.getDate()===l}))}}var u=function(e){function t(t){var a;(a=e.call(this,t)||this)._onViewportChange=function(e){return a.setState({viewport:e})},a._handleChangeDay=function(e){a.setState({selectedTime:e}),a.state.earthquakes&&a.setState({data:h(a.state.earthquakes,e)})},a._handleChangeAllDay=function(e){a.setState({allDay:e}),a.state.earthquakes&&a.setState({data:e?a.state.earthquakes:h(a.state.earthquakes,a.state.selectedTime)})};var r=(new Date).getTime();return a.state={viewport:{latitude:40,longitude:-100,zoom:3,bearing:0,pitch:0},allDay:!0,startTime:r,endTime:r,selectedTime:r,earthquakes:null},a._handleChangeDay=a._handleChangeDay.bind(Object(n.a)(a)),a._handleChangeAllDay=a._handleChangeAllDay.bind(Object(n.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this;Object(c.a)("https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",(function(t,a){if(!t){var n=a.features,r=n[0].properties.time,l=n[n.length-1].properties.time;e.setState({data:a,earthquakes:a,endTime:r,startTime:l,selectedTime:r})}}))},a.render=function(){var e=this.state,t=e.viewport,a=e.data,n=e.allDay,r=e.selectedTime,o=e.startTime,c=e.endTime;return l.createElement("div",{style:{height:"100%",position:"relative"}},l.createElement(i.default,Object.assign({},t,{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/dark-v9",onViewportChange:this._onViewportChange,mapboxApiAccessToken:""}),a&&l.createElement(i.Source,{type:"geojson",data:a},l.createElement(i.Layer,m))),l.createElement(s,{containerComponent:this.props.containerComponent,startTime:o,endTime:c,selectedTime:r,allDay:n,onChangeDay:this._handleChangeDay,onChangeAllDay:this._handleChangeAllDay}))},t}(l.Component);function p(e){Object(o.render)(l.createElement(u,null),e)}}}]);